Index: linux/drivers/mtd/Kconfig
===================================================================
--- linux.orig/drivers/mtd/Kconfig	2009-03-25 22:34:53.000000000 +0100
+++ linux/drivers/mtd/Kconfig	2009-03-25 22:35:09.000000000 +0100
@@ -180,6 +180,12 @@
 	---help---
 	  TI AR7 partitioning support
 
+config MTD_AR7_PARTS
+	tristate "TI AR7 partitioning support"
+	depends on MTD_PARTITIONS
+	---help---
+	  TI AR7 partitioning support
+
 comment "User Modules And Translation Layers"
 
 config MTD_CHAR
Index: linux/drivers/mtd/maps/physmap.c
===================================================================
--- linux.orig/drivers/mtd/maps/physmap.c	2009-03-25 22:34:53.000000000 +0100
+++ linux/drivers/mtd/maps/physmap.c	2009-03-25 22:35:09.000000000 +0100
@@ -80,7 +80,8 @@
 					"map_rom",
 					NULL };
 #ifdef CONFIG_MTD_PARTITIONS
-static const char *part_probe_types[] = { "cmdlinepart", "RedBoot", NULL };
+static const char *part_probe_types[] = {"cmdlinepart", "RedBoot",
+					"ar7part", NULL };
 #endif
 
 static int physmap_flash_probe(struct platform_device *dev)
