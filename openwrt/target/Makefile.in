# Default target skeleton stuff, may be overridden
EXTRAVERSION:=
XXX:=
TARGET_SKELETON=target/default/skel.tar.gz
TARGET_SKEL_DIR=target/default/target_skeleton

include target/device/Makefile.in

ifeq ($(strip $(BR2_TARGET_ROOTFS_JFFS2)),y)
include target/jffs2/blocksize.mk
JFFS2FLAGS+=-a $(JFFS2_BLOCK_SIZE) 
endif

openwrt-linux.trx: openwrt-trx
	@PATH=$(TARGET_PATH) trx -o openwrt-linux$(EXTRAVERSION).trx \
	 $(LINUX_DIR)/$(LINUX_BINLOC) $(JFFS2FLAGS) $(IMAGE).$(ROOTFS)

openwrt-code.bin: openwrt-addpattern openwrt-linux.trx
	@PATH=$(TARGET_PATH) addpattern -2 -i  openwrt-linux$(EXTRAVERSION).trx \
	-o openwrt-$(TAG)-code$(EXTRAVERSION).bin -g
	@sed -i -e "1s,^W54S,$(TAG)," openwrt-$(TAG)-code$(EXTRAVERSION).bin

ifeq ($(strip $(BR2_TARGET_ROOTFS_JFFS2)),y)
else
endif

openwrt-image-clean: 
	@-rm openwrt-* 2>/dev/null

openwrt-image-dirclean: openwrt-dirclean
